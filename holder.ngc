%
(Endmill 1/4)

G64 P0.001
S27000 M3
G0 Z0.25 X0.0 Y0.0

(TODO Endmill offset)

(#####################################)

O500 SUB
(Feed Rate)
#107=75
(Z Feed Rate)
#108=10
O500 ENDSUB

O101 SUB (Main rec)
(6.5 L, 12 W)
G1 Z-#1 F#108
G1 X0 Y12 F#107
G1 X6.5 Y12 
G1 X6.5 Y0
G1 X0 Y0
O101 ENDSUB

O102 SUB (Bottom rec - Lead holder)
(2.5 L, 6 W)
G0 X.25 Y.25
G1 Z-#1 F#108
G1 X.25 Y2.5 F#107
G1 X6.25 Y2.5 
G1 X6.25 Y.25
G1 X.25 Y.25
O102 ENDSUB

O103 SUB (Top rec - Eraser holder)
(2.5 L, 3.5 W)
G0 X.25 Y11.75
G1 Z-#1 F#108
G1 X.25 Y10 F#107 
G1 X3.5 Y10 
G1 X3.5 Y11.75
G1 X.25 Y11.75
O103 ENDSUB

(Circle to hold sharpener)
(1.3 diameter minus 1/2 for radius 0.65)
(minus 1/2 end mill diameter = .125)
(.65 - .125 = .525 for new radius)
O104 SUB
G0 X4.5 Y11
G1 Z-#1 F#108
G2 I.525 F#107
O104 ENDSUB

O108 SUB (Main Rec)
O500 CALL
O101 CALL [.15]
O101 CALL [.30]
O101 CALL [.45]
O101 CALL [.60]
O101 CALL [.77]
G1 Z.25 
O108 ENDSUB

O110 SUB (Lead holder)
O500 CALL
O102 CALL [.15]
O102 CALL [.30]
O102 CALL [.45]
O102 CALL [.50]
G1 Z.25 
O110 ENDSUB

O111 SUB (Eraser holder)
O500 CALL
O103 CALL [.15] 
O103 CALL [.30] 
O103 CALL [.45] 
O103 CALL [.50] 
G1 Z.25 
O111 ENDSUB

O112 SUB (Sharpener holder)
O500 CALL
O104 CALL [.15]
O104 CALL [.30]
O104 CALL [.45]
O104 CALL [.50]
G1 Z.25 
G0 X.25 Y2.75 Z.25
O112 ENDSUB

(#####################################)

O100 SUB (Initial settings for concave)
(Loop Counter)
#100=1
(Y Increment, increments in while loop)
#101=2.75
(Loop total determines Y length)
#102=18 (18 = Y=7)
(X Length)
#103=6.25
(Endmill increment)
#104=.20
(Feed Rate)
#105=75
(X Offset)
#106=.25
G01 Z.25 F#105
G01 X#106 Y#101 Z.25
O100 ENDSUB

O200 SUB (Set tool plane to X, Z - run counter clockwise G02)
G17
G01 Y#1 
G18 G02 X#103 Y#1 R#2
G17
O200 ENDSUB

O300 SUB (Set tool plane to X, Z - run clockwise G03)

G17
G01 Y#1 
G18 G03 X#106 Y#1 R#2
G17
O300 ENDSUB

O400 SUB (Main concave subroutine that uses loop to build out cutting path)
G01 Z-.0
O100 WHILE [#100 LE #102]
O200 CALL [#101][#1]
#101 = [#101 + #104]
O300 CALL [#101][#1]
#101 = [#101 + #104]
#100 = [#100 + 1]
O100 ENDWHILE
O400 ENDSUB

O109 SUB (Concave plane - pencil holder)
(R30 Z-.15, R15 Z-.30, R10 Z-.46)
O100 CALL
O400 CALL [30]
O100 CALL
O400 CALL [15]
O100 CALL
O400 CALL [10]
O100 CALL
O109 ENDSUB

(#####################################)
(#####################################)

(Main)
O110 CALL (Lead holder)
O111 CALL (Eraser holder)
O112 CALL (Sharpener  holder)
O109 CALL (Concave pencil holder)
O108 CALL (Main Rec)

(#####################################)
(#####################################)

G0 X0 Y0 Z0.25
(Stop Spindle)
M5
M02
%


